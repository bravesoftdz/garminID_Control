unit Unit6;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs, FMX.StdCtrls,
  FMX.Edit, FMX.Controls.Presentation, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Error, FireDAC.UI.Intf, FireDAC.Phys.Intf, FireDAC.Stan.Def,
  FireDAC.Stan.Pool, FireDAC.Stan.Async, FireDAC.Phys, FireDAC.FMXUI.Wait,
  Data.DB, FireDAC.Comp.Client;

type
  TForm6 = class(TForm)
    Panel1: TPanel;
    Button1: TButton;
    Edit1: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    Edit2: TEdit;
    Button2: TButton;
    LoginConnection: TFDConnection;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form6: TForm6;

implementation

{$R *.fmx}

procedure TForm6.FormCreate(Sender: TObject);
var
  oParams: TStringList;
begin
  try
      if FileExists(ExtractFilePath(ParamStr(0)) + 'file.ini' ) then
      begin
        try
          oParams:=Tstringlist.Create;
          oParams.LoadFromFile( ExtractFilePath(ParamStr(0)) + 'file.ini' );
          oParams.Add('Pooled=True');
          FDManager.AddConnectionDef('garmin_inventory', 'MySQL', oParams);
          LoginConnection.ConnectionDefName:='garmin_inventory';
        finally
          oParams.Free;
        end;
      end;


      LoginConnection.Connected:=true;
    except
      on E:exception do
      ShowMessage(E.ClassName +' has rised exception of '+ E.Message);
    end;
end;

end.
